<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width-device-width, initial-scale=1">
    <title>ヘブライ語翻字入力</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h2>聖書ヘブライ語の翻字・転写を入力するやつ(仮)</h2>
    </header>
    <div class="content">
        <h3>筑波方式(池田ほか 2003)</h3>
        <textarea placeholder="ここに入力" id="inputText1"></textarea>
        <br>
        <div class="output">
            <pre id="result1"></pre>
        </div>
        <br>
        <h3>小脇方式(小脇 2013)</h3>
        <textarea placeholder="ここに入力" id="inputText2"></textarea>
        <br>
        <div class="output">
            <pre id="result2"></pre>
        </div>
        <button id="toggleButton">発音記号を表示/非表示</button>
        <div id="toggleElement" style="display: none;">
            <div class="output">発音記号：
                <pre id="result3"></pre>
            </div>
        </div>

        <script>
            // ボタンと非表示にする要素を取得
            const toggleButton = document.getElementById('toggleButton');
            const toggleElement = document.getElementById('toggleElement');

            // ボタンクリック時のイベントリスナーを設定
            toggleButton.addEventListener('click', () => {
                // 要素の表示状態を切り替える
                if (toggleElement.style.display === 'none' || toggleElement.style.display === '') {
                    toggleElement.style.display = 'block';
                } else {
                    toggleElement.style.display = 'none';
                }
            });
        </script>


        <script>
            function updateResults() {
                // 入力値を取得

                //筑波方式
                const inputText1 = document.getElementById('inputText1').value;
                const result1 = inputText1
                    .replace(/O/g, 'ɔ')
                    .replace(/E/g, 'ɛ')
                    .replace(/\^a/g, 'ᵃ')
                    .replace(/\^ɛ/g, 'ᵋ')
                    .replace(/\^ɔ/g, 'ᵓ')
                    .replace(/\^w/g, 'ʷ')
                    .replace(/\^y/g, 'ʸ')
                    .replace(/3/g, 'ʔ')
                    .replace(/c/g, 'ʕ')
                    .replace(/#/g, '3')
                    .replace(/H/g, 'ħ')
                    .replace(/x/g, 'š')
                    .replace(/X/g, 'Š')
                    .replace(/j/g, 'ś')
                    .replace(/sv/g, 'š')
                    .replace(/s'/g, 'ś')
                    .replace(/T/g, 'ṭ')
                    .replace(/K/g, 'ḳ')
                    .replace(/q/g, 'ḳ')
                    .replace(/S/g, 'ṣ')
                    .replace(/ṣv/g, 'Š')
                    .replace(/p_/g, 'p̄')
                    .replace(/t_/g, 'ṯ')
                    .replace(/k_/g, 'ḵ')
                    .replace(/b_/g, 'ḇ')
                    .replace(/d_/g, 'ḏ')
                    .replace(/g_/g, 'ḡ')
                    .replace(/\^h/g, 'ʰ')
                    .replace(/\^ʔ/g, 'ˀ')
                    .replace(/a'/g, 'á')
                    .replace(/e'/g, 'é')
                    .replace(/i'/g, 'í')
                    .replace(/o'/g, 'ó')
                    .replace(/u'/g, 'ú')
                    .replace(/ɛ'/g, 'ɛ́')
                    .replace(/ɔ'/g, 'ɔ́')
                    .replace(/a\\/g, 'à')
                    .replace(/e\\/g, 'è')
                    .replace(/i\\/g, 'ì')
                    .replace(/o\\/g, 'ò')
                    .replace(/u\\/g, 'ù')
                    .replace(/ɛ\\/g, 'ɛ̀')
                    .replace(/ɔ\\/g, 'ɔ̀');


                //結果
                document.getElementById('result1').textContent = result1;

                //小脇方式
                const inputText2 = document.getElementById('inputText2').value;
                const result2 = inputText2
                    .replace(/oo/g, 'ō')
                    .replace(/ee/g, 'ē')
                    .replace(/aa/g, 'ā')
                    .replace(/e\^/g, 'ê')
                    .replace(/ê\./g, 'ệ')
                    .replace(/o\^/g, 'ô')
                    .replace(/i\^/g, 'î')
                    .replace(/u\^/g, 'û')
                    .replace(/@/g, 'ə')
                    .replace(/əa/g, 'ă')
                    .replace(/əe/g, 'ĕ')
                    .replace(/əo/g, 'ŏ')
                    .replace(/au/g, 'ă')
                    .replace(/eu/g, 'ĕ')
                    .replace(/ou/g, 'ŏ')
                    .replace(/3/g, 'ʾ')
                    .replace(/c/g, 'ʿ')
                    .replace(/#/g, '3')
                    .replace(/h\./g, 'ḥ')
                    .replace(/sv/g, 'š')
                    .replace(/s'/g, 'ś')
                    .replace(/t\./g, 'ṭ')
                    .replace(/s\./g, 'ṣ')
                    .replace(/p_/g, 'p̄')
                    .replace(/t_/g, 'ṯ')
                    .replace(/k_/g, 'ḵ')
                    .replace(/b_/g, 'ḇ')
                    .replace(/d_/g, 'ḏ')
                    .replace(/g_/g, 'ḡ')
                    .replace(/h_/g, 'ẖ')
                    .replace(/a'/g, 'á')
                    .replace(/e'/g, 'é')
                    .replace(/i'/g, 'í')
                    .replace(/o'/g, 'ó')
                    .replace(/u'/g, 'ú')
                    .replace(/ō'/g, 'ṓ')
                    .replace(/ē'/g, 'ḗ')
                    .replace(/ā'/g, 'ā́')
                    .replace(/ê'/g, 'ê')
                    .replace(/ệ'/g, 'ệ́')
                    .replace(/ô'/g, 'ố')
                    .replace(/î'/g, 'î́')
                    .replace(/û'/g, 'û́');

                //結果
                document.getElementById('result2').textContent = result2;
                //発音記号を生成
                const result3_1 = inputText2
                    .replace(/yhwh/g, '3ad_oonay')
                    .replace(/YHWH/g, '3ad_oonay')
                    .replace(/oo/g, 'o')
                    .replace(/ee/g, 'e')
                    .replace(/aa/g, 'a')
                    .replace(/e\^/g, 'e')
                    .replace(/ê\./g, 'e')
                    .replace(/o\^/g, 'o')
                    .replace(/i\^/g, 'i')
                    .replace(/u\^/g, 'u')
                    .replace(/@/g, 'ə')
                    .replace(/əa/g, 'a')
                    .replace(/əe/g, 'e')
                    .replace(/əo/g, 'o')
                    .replace(/au/g, 'a')
                    .replace(/eu/g, 'e')
                    .replace(/ou/g, 'o')
                    .replace(/3/g, 'G')
                    .replace(/c/g, 'G')
                    .replace(/#/g, '3')
                    .replace(/h\./g, 'ꭓ')
                    .replace(/sv/g, 'ʃ')
                    .replace(/s'/g, 's')
                    .replace(/t\./g, 't')
                    .replace(/s\./g, 'ts')
                    .replace(/p_/g, 'f')
                    .replace(/t_/g, 't')
                    .replace(/k_/g, 'ꭓ')
                    .replace(/b_/g, 'v')
                    .replace(/d_/g, 'd')
                    .replace(/g_/g, 'ɡ')
                    .replace(/h_/g, '')
                    .replace(/a'/g, 'á')
                    .replace(/e'/g, 'é')
                    .replace(/i'/g, 'í')
                    .replace(/o'/g, 'ó')
                    .replace(/u'/g, 'ú')
                    .replace(/ō'/g, 'ó')
                    .replace(/ē'/g, 'é')
                    .replace(/ā'/g, 'á')
                    .replace(/ê'/g, 'é')
                    .replace(/ệ'/g, 'é')
                    .replace(/ô'/g, 'ó')
                    .replace(/î'/g, 'í')
                    .replace(/û'/g, 'ú')
                    .replace(/w/g, 'v')
                    .replace(/r/g, 'ʁ')
                    .replace(/y/g, 'j')
                    .replace(/-/g, ' ');

                //ダゲシュの処理
                const result3_2 = result3_1
                    .replace(/bb/g, 'b')
                    .replace(/ɡɡ/g, 'ɡ')
                    .replace(/dd/g, 'd')
                    .replace(/vv/g, 'v')
                    .replace(/zz/g, 'z')
                    .replace(/tt/g, 't')
                    .replace(/jj/g, 'j')
                    .replace(/kk/g, 'k')
                    .replace(/ll/g, 'l')
                    .replace(/mm/g, 'm')
                    .replace(/nn/g, 'n')
                    .replace(/ss/g, 's')
                    .replace(/pp/g, 'p')
                    .replace(/tsts/g, 'ts')
                    .replace(/ʃʃ/g, 'ʃ');


                //シュヴァとhの処理
                const result3_3 = result3_2
                    .replace(/\syə/g, ' ye')
                    .replace(/\svə/g, ' ve')
                    .replace(/\smə/g, ' me')
                    .replace(/\snə/g, ' ne')
                    .replace(/\slə/g, ' le')
                    .replace(/\srə/g, ' re')
                    .replace(/^yə/g, 'ye')
                    .replace(/^və/g, 've')
                    .replace(/^mə/g, 'me')
                    .replace(/^nə/g, 'ne')
                    .replace(/^lə/g, 'le')
                    .replace(/^rə/g, 're')
                    .replace(/ə(?=G|h)/g, 'e')
                    .replace(/h\s/g, ' ')
                    .replace(/h$/g, '')
                    .replace(/G/g, '')
                    .replace(/ə/g, '');

                //結果
                document.getElementById('result3').textContent = result3_3;

            }


            // 入力イベントでリアルタイム更新
            document.getElementById('inputText1').addEventListener('input', updateResults);
            document.getElementById('inputText2').addEventListener('input', updateResults);
        </script>

        <h3>つかいかた(筑波方式)</h3>
        <ul>
            <li>ɔは"O", ɛは"E"で入力します。</li>
            <li>アレフとアインはそれぞれ"3", "c"で入力します。</li>
            <li>š, Šは"sv", "Sv"で入力します。</li>
            <li>ṭ, ḳ, ṣ, ħは"T", "K", "S", "H"で入力します。</li>
            <li>摩擦音化したBGDKPTは続けて"_"を入力します。(例)"b_"→ḇ</li>
            <li>小書きの上付き文字は文字の前に"^"を入力します。(例)"^a"→ᵃ</li>
            <li>母音の後にアポストロフィを入力するとアキュートアクセントが付きます(同様にśもsの後にアポストロフィを入力します)。(例)e'>é, u^'→û́</li>
            <li>母音の後にバックスペースを入力するとグレーヴアクセントが付きます。</li>
        </ul>

        <h3>つかいかた(小脇方式)</h3>
        <ul>
            <li>マクロン付きの母音は文字を2回続けて入力します。(例)aa→ā</li>
            <li>サーカムフレックスは続けて"^"を入力します。(例)i^→î</li>
            <li>下付きドットのある文字は続けてピリオドを入力します(ệは"e^."と入力してください)。</li>
            <li>シュヴァは"@"で入力します。</li>
            <li>複合シュヴァă, ĕ, ŏは"au", "eu", "ou"または"@a", "@e", "@o"と入力します。</li>
            <li>šは"sv"で入力します。</li>
            <li>摩擦音化したBGDKPTは続けて"_"を入力します。(例)"b_"→ḇ</li>
            <li>アレフとアインはそれぞれ"3", "c"で入力します。</li>
            <li>母音の後にアポストロフィを入力するとアクセント記号が付きます(同様にśもsの後にアポストロフィを入力します)。(例)e'>é, u^'→û́</li>
            <li>発音記号(現代式)を表示するオプションがあります。あまり正確ではないので参考程度です。</li>
        </ul>

        <h3>参考文献</h3>
        <ul>
            <li>
                池田潤・高橋洋成・池田晶(2003)「聖書ヘブライ語のラテン文字転写について : 文字学・文字論的考察と筑波方式の提案」『一般言語学論叢』6: 61-105.
            </li>
            <li>
                小脇光男(2013)「聖書ヘブライ語文法」青山社.
            </li>
        </ul>
    </div>
</body>

</html>